"use strict";(self["webpackChunkknowledge"]=self["webpackChunkknowledge"]||[]).push([[339],{2251:function(e,a,l){l.a(e,(async function(e,t){try{l(7658);var r=l(3396),s=l(2268),n=l(4870),u=l(7139),i=l(5490),d=l(8859),o=l(2863),c=l(5657),m=l(12),p=l(6853),g=l(8379),w=e([d]);d=(w.then?(await w)():w)[0];const h={class:"login-bg"},v={class:"logo",style:{position:"relative","z-index":"9","padding-left":"20px","text-align":"left"}},f=["src"],b=(0,r._)("span",{class:"wtext-l"},"Chess Of Stars",-1),y={class:"login-box",style:{"margin-top":"10px"}},_=(0,r._)("h3",{class:"title-des wtext-xl"},"Welcome !",-1),x=(0,r._)("p",{class:"text-muted"},[(0,r._)("small",null,"register your own account^^")],-1),k=(0,r._)("div",{style:{"margin-top":"60px","font-size":"14px"}},[(0,r._)("span",{class:"text-muted"},"Has accountï¼Ÿ"),(0,r._)("a",{href:"/login"},"Sign In")],-1);a.Z={__name:"register",setup(e){const a=(0,u.oR)(),t=(0,i.tv)(),w=((0,n.iH)([{id:0,name:"channel leader"},{id:1,name:"club boss"},{id:2,name:"user"}]),(0,n.iH)(null));let V=o.lV.getURLParam("id");const $=(0,n.iH)({email:"",name:"",passwd:"",userType:2,code:"",rpassword:"",inviterId:V?(0,m.g)(V):null}),W=(0,n.iH)({}),q=(0,n.iH)(0),E=(0,n.iH)(!1);function U(){w.value.validateField(["email"],(e=>{e&&(c.K.show(),d.BG.code({email:$.value.email}).then((e=>{0==e.code&&((0,p.bM)({type:"success",message:"send successfully!"}),E.value=!0,q.value=e.data,c.K.hide())})))}))}function R(){w.value.validate((e=>{if(e){c.K.show();let e={email:$.value.email,name:$.value.name,passwd:(0,m.m)($.value.passwd),userType:$.value.userType,code:$.value.code,inviterId:$.value.inviterId};d.BG.signup(e).then((e=>{0==e.code&&"success"==e.msg&&T(),c.K.hide()}))}}))}function T(){c.K.show();let e={email:$.value.email,passwd:$.value.passwd};d.BG.login(e).then((e=>{0==e.code&&"success"==e.msg&&(a.commit("setUser",{name:e.data.userName,account:e.data.walletAddress,id:e.data.userId}),a.commit("setRole",e.data.userType),a.commit("setToken",e.data.token),t.push({path:"/plat/dashboard"})),c.K.hide()}))}return W.value.email=[{required:!0,message:"Email is required",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]},{validator:function(e,a,l){a&&d.BG.checkEmail(a).then((e=>{e.data?l():l(new Error("this email has been used,please use another one"))}))},trigger:"blur"}],W.value.name=[{required:!0,message:"Nick name is required",trigger:"blur"},{min:2,max:64,message:"The length between 2 and 64 character",trigger:"blur"},{required:!0,pattern:/^[a-zA-Z]{1}([a-zA-Z0-9]|[_]){1,64}$/,message:"Begin with a letter, and use letters, numbers and the underscore(_)",trigger:"blur"},{validator:function(e,a,l){a&&d.BG.checkUser(a).then((e=>{0!=e.code||e.data?l(new Error("this nick name has been used,please use another one")):l()}))},trigger:"blur"}],W.value.passwd=[{required:!0,message:"Password is required",trigger:"blur"},{min:8,max:64,message:"The length between 8 and 64 character",trigger:"blur"},{required:!0,pattern:/^(?!^\d+$)(?!^[a-z]+$)(?!^[A-Z]+$)(?!^[^a-z0-9]+$)(?!^[^A-Z0-9]+$)(?!^.*[\u4E00-\u9FA5].*$)^\S*$/,message:"Contains at least two types of numbers, uppercase and lowercase letters, and special characters",trigger:"blur"}],W.value.code=[{required:!0,message:"Verify code is required",trigger:"blur"}],W.value.rpassword=[{required:!0,message:"password is required",trigger:"blur"},{min:8,max:64,message:"The length between 8 and 64 character",trigger:"blur"},{required:!0,pattern:/^(?!^\d+$)(?!^[a-z]+$)(?!^[A-Z]+$)(?!^[^a-z0-9]+$)(?!^[^A-Z0-9]+$)(?!^.*[\u4E00-\u9FA5].*$)^\S*$/,message:"Contains at least two types of numbers, uppercase and lowercase letters, and special characters",trigger:"blur"},{validator:function(e,a,l){a!=$.value.passwd?l(new Error("The passwords are inconsistent, please re-enter ")):l()},trigger:"blur"}],(e,a)=>{const t=(0,r.up)("el-input"),n=(0,r.up)("el-form-item"),u=(0,r.up)("el-col"),i=(0,r.up)("el-button"),d=(0,r.up)("el-row"),o=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("div",v,[(0,r._)("img",{src:l(5080)},null,8,f),b]),(0,r._)("div",y,[_,x,(0,r.Wm)(o,{ref_key:"formRef",ref:w,rules:W.value,"label-position":"top","label-width":"100px",model:$.value,style:{"padding-top":"40px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{label:"Email",prop:"email"},{default:(0,r.w5)((()=>[(0,r.Wm)(t,{modelValue:$.value.email,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.email=e),placeholder:"enter your email",clearable:"",readonly:E.value},null,8,["modelValue","readonly"])])),_:1}),(0,r.Wm)(n,{label:"Verify code",prop:"code"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{gutter:10,style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{span:18},{default:(0,r.w5)((()=>[(0,r.Wm)(t,{modelValue:$.value.code,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.code=e),type:"text",placeholder:"enter your verify code",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(u,{span:6},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{onClick:U,type:"primary",disabled:E.value,plain:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(E.value?"":"send")+" ",1),E.value?((0,r.wg)(),(0,r.j4)(g.Z,{key:0,limit:q.value,onChange:a[2]||(a[2]=()=>{E.value=!1})},null,8,["limit"])):(0,r.kq)("",!0)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),(0,r.Wm)(n,{label:"Nick name",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(t,{modelValue:$.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value.name=e),placeholder:"enter your nick name",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(n,{label:"Password",prop:"passwd"},{default:(0,r.w5)((()=>[(0,r.Wm)(t,{modelValue:$.value.passwd,"onUpdate:modelValue":a[4]||(a[4]=e=>$.value.passwd=e),type:"password",placeholder:"enter your password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(n,{label:"Repeat password",prop:"rpassword"},{default:(0,r.w5)((()=>[(0,r.Wm)(t,{modelValue:$.value.rpassword,"onUpdate:modelValue":a[5]||(a[5]=e=>$.value.rpassword=e),type:"password",placeholder:"enter your password again","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",class:"w-100 shadow",onClick:a[6]||(a[6]=e=>R())},{default:(0,r.w5)((()=>[(0,r.Uk)("Sign Up")])),_:1})])),_:1})])),_:1},8,["rules","model"]),k])])}}},t()}catch(h){t(h)}}))},2863:function(e,a,l){l.d(a,{Ov:function(){return r},lV:function(){return t}});const t={getURLParam:e=>{let a=new URL(window.location),l=a.searchParams,t=l.get(e);return t}},r={toString:(e,a)=>{if(!e)return"";a||(a="yyyy-MM-dd hh:mm:ss");let l=new Date(e),t={"M+":l.getMonth()+1,"d+":l.getDate(),"h+":l.getHours(),"m+":l.getMinutes(),"s+":l.getSeconds(),"q+":Math.floor((l.getMonth()+3)/3),S:l.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(l.getFullYear()+"").substr(4-RegExp.$1.length)));for(let r in t)new RegExp("("+r+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return a},getDay:e=>{let a=new Date,l=a.getTime()+864e5*e;return a.setTime(l),a}}},1339:function(e,a,l){l.a(e,(async function(e,t){try{l.r(a);var r=l(1175),s=e([r]);r=(s.then?(await s)():s)[0];const n=r.Z;a["default"]=n,t()}catch(n){t(n)}}))},1175:function(e,a,l){l.a(e,(async function(e,t){try{l.d(a,{Z:function(){return r.Z}});var r=l(2251),s=e([r]);r=(s.then?(await s)():s)[0],t()}catch(n){t(n)}}))}}]);
//# sourceMappingURL=339.undefined.1685951997342.js.map